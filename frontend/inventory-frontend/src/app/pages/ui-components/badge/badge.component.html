<mat-card class="cardWithShadow">
  <mat-card-title>Gestión de Almacén</mat-card-title>
  <mat-card-subtitle>Complete los datos del almacén</mat-card-subtitle>

  <form class="form-grid" (ngSubmit)="guardarAlmacen()" #almacenForm="ngForm">
    <mat-form-field appearance="outline">
      <mat-label>Código de almacén</mat-label>
      <input matInput [(ngModel)]="almacen.codigo" name="codigo" required placeholder="Ejemplo: ALM-001" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Nombre</mat-label>
      <input matInput [(ngModel)]="almacen.nombre" name="nombre" required placeholder="Nombre del almacén" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Dirección</mat-label>
      <textarea matInput [(ngModel)]="almacen.direccion" name="direccion" rows="2" placeholder="Dirección o ubicación del almacén"></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Responsable</mat-label>
      <input matInput [(ngModel)]="almacen.responsable" name="responsable" placeholder="Nombre del responsable" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Tipo</mat-label>
      <mat-select [(ngModel)]="almacen.tipo" name="tipo">
        <mat-option value="general">General</mat-option>
        <mat-option value="envases">Envases</mat-option>
        <mat-option value="vencidos">Vencidos</mat-option>
        <mat-option value="químicos">Químicos</mat-option>
        <mat-option value="otros">Otros</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Capacidad (m³)</mat-label>
      <input matInput type="number" [(ngModel)]="almacen.capacidad" name="capacidad" placeholder="Capacidad estimada" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Estado</mat-label>
      <mat-select [(ngModel)]="almacen.estado" name="estado">
        <mat-option value="activo">Activo</mat-option>
        <mat-option value="inactivo">Inactivo</mat-option>
      </mat-select>
    </mat-form-field>

    <div class="actions">
      <button mat-raised-button color="primary" type="submit">Guardar</button>
      <button mat-stroked-button color="warn" type="button" (click)="cancelar()">Cancelar</button>
    </div>
  </form>
</mat-card>

<!-- Confirmación -->
<div *ngIf="confirmacion" class="mensaje-exito">
  ✅ Almacén guardado correctamente.
</div>

<!-- Tabla de almacenes -->
<div *ngIf="almacenes.length > 0" class="table-container">
  <table mat-table [dataSource]="almacenes" class="mat-elevation-z2">

    <ng-container matColumnDef="codigo">
      <th mat-header-cell *matHeaderCellDef>Código</th>
      <td mat-cell *matCellDef="let a">{{ a.codigo }}</td>
    </ng-container>

    <ng-container matColumnDef="nombre">
      <th mat-header-cell *matHeaderCellDef>Nombre</th>
      <td mat-cell *matCellDef="let a">{{ a.nombre }}</td>
    </ng-container>

    <ng-container matColumnDef="responsable">
      <th mat-header-cell *matHeaderCellDef>Responsable</th>
      <td mat-cell *matCellDef="let a">{{ a.responsable }}</td>
    </ng-container>

    <ng-container matColumnDef="tipo">
      <th mat-header-cell *matHeaderCellDef>Tipo</th>
      <td mat-cell *matCellDef="let a">{{ a.tipo | titlecase }}</td>
    </ng-container>

    <ng-container matColumnDef="estado">
      <th mat-header-cell *matHeaderCellDef>Estado</th>
      <td mat-cell *matCellDef="let a">
        <span [class.badge-activo]="a.estado === 'activo'" [class.badge-inactivo]="a.estado === 'inactivo'">
          {{ a.estado | titlecase }}
        </span>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnas"></tr>
    <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
  </table>
</div>
