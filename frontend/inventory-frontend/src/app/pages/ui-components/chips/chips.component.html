<mat-card class="cardWithShadow">
  <mat-card-title>Registro de Proveedor</mat-card-title>
  <mat-card-subtitle>Complete los datos del proveedor o cliente</mat-card-subtitle>

  <form class="form-grid" (ngSubmit)="guardarProveedor()" #proveedorForm="ngForm">
    <mat-form-field appearance="outline">
      <mat-label>Proveedor</mat-label>
      <input matInput [(ngModel)]="proveedor.nombre" name="nombre" placeholder="Nombre comercial o razón social" required />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>RUC</mat-label>
      <input matInput maxlength="11" [(ngModel)]="proveedor.ruc" name="ruc" placeholder="Ingrese RUC" required />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Contacto</mat-label>
      <input matInput [(ngModel)]="proveedor.contacto" name="contacto" placeholder="Nombre del contacto o representante" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Teléfono</mat-label>
      <input matInput [(ngModel)]="proveedor.telefono" name="telefono" placeholder="Número telefónico" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput type="email" [(ngModel)]="proveedor.email" name="email" placeholder="Correo electrónico" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Dirección</mat-label>
      <textarea matInput [(ngModel)]="proveedor.direccion" name="direccion" rows="2" placeholder="Dirección completa o zona"></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Observaciones</mat-label>
      <textarea matInput [(ngModel)]="proveedor.observaciones" name="observaciones" rows="2" placeholder="Detalles adicionales, condiciones o comentarios"></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Tipo de proveedor</mat-label>
      <mat-select [(ngModel)]="proveedor.tipo" name="tipo">
        <mat-option value="insumos">Insumos</mat-option>
        <mat-option value="servicios">Servicios</mat-option>
        <mat-option value="transporte">Transporte</mat-option>
        <mat-option value="cliente">Cliente</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Condiciones de pago</mat-label>
      <mat-select [(ngModel)]="proveedor.condicionesPago" name="condicionesPago">
        <mat-option value="contado">Contado</mat-option>
        <mat-option value="credito15">Crédito 15 días</mat-option>
        <mat-option value="credito30">Crédito 30 días</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Moneda habitual</mat-label>
      <mat-select [(ngModel)]="proveedor.moneda" name="moneda">
        <mat-option value="pen">Soles (S/)</mat-option>
        <mat-option value="usd">Dólares ($)</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Estado</mat-label>
      <mat-select [(ngModel)]="proveedor.estado" name="estado">
        <mat-option value="activo">Activo</mat-option>
        <mat-option value="inactivo">Inactivo</mat-option>
      </mat-select>
    </mat-form-field>

    <div class="actions">
      <button mat-raised-button color="primary" type="submit">Guardar</button>
      <button mat-stroked-button color="warn" type="button" (click)="cancelar()">Cancelar</button>
    </div>
  </form>
</mat-card>

<!-- Confirmación -->
<div *ngIf="confirmacion" class="mensaje-exito">
  ✅ Proveedor guardado correctamente.
</div>

<!-- Tabla de proveedores -->
<div *ngIf="proveedores.length > 0" class="table-container">
  <table mat-table [dataSource]="proveedores" class="mat-elevation-z2">

    <ng-container matColumnDef="nombre">
      <th mat-header-cell *matHeaderCellDef>Proveedor</th>
      <td mat-cell *matCellDef="let p">{{ p.nombre }}</td>
    </ng-container>

    <ng-container matColumnDef="ruc">
      <th mat-header-cell *matHeaderCellDef>RUC</th>
      <td mat-cell *matCellDef="let p">{{ p.ruc }}</td>
    </ng-container>

    <ng-container matColumnDef="contacto">
      <th mat-header-cell *matHeaderCellDef>Contacto</th>
      <td mat-cell *matCellDef="let p">{{ p.contacto }}</td>
    </ng-container>

    <ng-container matColumnDef="telefono">
      <th mat-header-cell *matHeaderCellDef>Teléfono</th>
      <td mat-cell *matCellDef="let p">{{ p.telefono }}</td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>Email</th>
      <td mat-cell *matCellDef="let p">{{ p.email }}</td>
    </ng-container>

    <ng-container matColumnDef="tipo">
      <th mat-header-cell *matHeaderCellDef>Tipo</th>
      <td mat-cell *matCellDef="let p">{{ p.tipo | titlecase }}</td>
    </ng-container>

    <ng-container matColumnDef="estado">
      <th mat-header-cell *matHeaderCellDef>Estado</th>
      <td mat-cell *matCellDef="let p">
        <span [class.badge-activo]="p.estado === 'activo'" [class.badge-inactivo]="p.estado === 'inactivo'">
          {{ p.estado | titlecase }}
        </span>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnas"></tr>
    <tr mat-row *matRowDef="let row; columns: columnas;"></tr>
  </table>
</div>
